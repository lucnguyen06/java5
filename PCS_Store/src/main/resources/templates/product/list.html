<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>Products</title>
<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
	rel="stylesheet">

<style>
body {
	font-family: 'Segoe UI', sans-serif;
}

.card {
	border: none;
	border-radius: 12px;
	transition: .25s;
	box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
}

.card:hover {
	transform: translateY(-6px);
	box-shadow: 0 8px 20px rgba(0, 0, 0, 0.12);
}

.card img {
	height: 200px;
	object-fit: cover;
	border-top-left-radius: 12px;
	border-top-right-radius: 12px;
}

.price {
	font-weight: bold;
	color: #dc3545;
}

.old-price {
	text-decoration: line-through;
	color: gray;
	font-size: 14px;
}

.badge-discount {
	position: absolute;
	top: 10px;
	right: 10px;
	background: red;
}

.product-link {
	text-decoration: none;
	color: black;
}
</style>
</head>

<body class="bg-light">

	<div class="container mt-4">

		<h3 class="mb-3 fw-bold">Product List</h3>

		<!-- SEARCH -->
		<form method="get" action="/product" class="mb-4">
			<div class="input-group shadow-sm">
				<input name="keywords" th:value="${keywords}" class="form-control"
					placeholder="Search product...">
				<button class="btn btn-dark">Search</button>
			</div>
		</form>

		<div class="row">
			<div class="col-md-3 mb-4" th:each="p : ${items.content}">
				<div class="card h-100 position-relative">

					<span th:if="${p.discount>0}" class="badge badge-discount">
						-<span th:text="${p.discount}"></span>%
					</span> <a th:href="@{'/product/detail/' + ${p.id}}" class="product-link">
						<img th:src="@{'/images/' + ${p.image}}" class="card-img-top">
						<div class="card-body text-center">
							<h6 th:text="${p.name}"></h6>
						</div>
					</a>

					<div class="card-footer bg-white border-0 text-center">

						<p th:if="${p.discount > 0}">
							<span class="old-price"
								th:text="${#numbers.formatDecimal(p.price,0,'COMMA',0,'POINT')} + ' đ'"></span><br>
							<span class="price"
								th:text="${#numbers.formatDecimal(p.price*(1-p.discount/100),0,'COMMA',0,'POINT')} + ' đ'"></span>
						</p>

						<p th:if="${p.discount == 0}" class="price"
							th:text="${#numbers.formatDecimal(p.price,0,'COMMA',0,'POINT')} + ' đ'"></p>

						<a th:href="@{'/product/detail/' + ${p.id}}"
							class="btn btn-sm btn-outline-dark w-100">Detail</a>
					</div>

				</div>
			</div>
		</div>

		<!-- PAGINATION -->
		<nav class="mt-3">
			<ul class="pagination justify-content-center">

				<li class="page-item" th:if="${items.hasPrevious()}"><a
					class="page-link" th:href="@{'/product?p=' + ${items.number-1}}">Previous</a>
				</li>

				<li class="page-item disabled"><a class="page-link"> <span
						th:text="${items.number+1}"></span> / <span
						th:text="${items.totalPages}"></span>
				</a></li>

				<li class="page-item" th:if="${items.hasNext()}"><a
					class="page-link" th:href="@{'/product?p=' + ${items.number+1}}">Next</a>
				</li>

			</ul>
		</nav>

	</div>

</body>
</html>
